<div class="main-content">
    <div class="container">
      <div class="tool-header">
        <h1>Flight Itinerary Planner</h1>
        <p>Create professional flight itineraries for your trips. Fill in the details below and download as PDF.</p>
      </div>
  
      <div class="form-container">
        <form [formGroup]="flightForm" id="flightItineraryForm">
          <!-- Basic Information Section -->
          <div class="form-section">
            <h2>Basic Information</h2>
            <div class="form-row">
              <div class="form-group">
                <label for="travelAgency">Travel Agency</label>
                <input type="text" id="travelAgency" formControlName="travelAgency" class="form-control">
              </div>
              <div class="form-group">
                <label for="travelerName">Traveler Name(s)</label>
                <input type="text" id="travelerName" formControlName="travelerName" class="form-control" placeholder="e.g., John Doe, Jane Doe">
              </div>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label for="dateOfTravel">Date of Travel</label>
                <input type="date" id="dateOfTravel" formControlName="dateOfTravel" class="form-control">
              </div>
              <div class="form-group">
                <label for="departureCity">City of Departure</label>
                <input type="text" id="departureCity" formControlName="departureCity" class="form-control" placeholder="e.g., New York">
              </div>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label for="citiesCovered">Cities Covered</label>
                <input type="text" id="citiesCovered" formControlName="citiesCovered" class="form-control" placeholder="e.g., Paris, London, Rome">
              </div>
              <div class="form-group">
                <label for="totalCost">Total Package Cost (INR)</label>
                <input type="text" id="totalCost" formControlName="totalCost" class="form-control" placeholder="e.g., 1,18,239">
              </div>
            </div>
            <div class="form-group">
              <label for="introText">Introductory Text</label>
              <textarea id="introText" formControlName="introText" class="form-control"></textarea>
            </div>
            <div class="form-group">
              <label for="packageInclusions">Package Inclusions</label>
              <textarea id="packageInclusions" formControlName="packageInclusions" class="form-control"></textarea>
            </div>
            <div class="form-group">
              <label for="mealPlan">Meal Plan</label>
              <input type="text" id="mealPlan" formControlName="mealPlan" class="form-control">
            </div>
            <div class="form-group">
              <label for="packageExclusions">Package Exclusions</label>
              <textarea id="packageExclusions" formControlName="packageExclusions" class="form-control"></textarea>
            </div>
          </div>
  
          <!-- Flight Details Section -->
          <div class="form-section">
            <h2>Flight Details</h2>
            <div formArrayName="flightDetails" id="flightDetailsContainer">
              <div class="compact-flight-row" *ngFor="let flight of flights.controls; let i = index" [formGroupName]="i">
                <div class="compact-flight-group">
                  <label [attr.for]="'airline' + i">Airline</label>
                  <input type="text" [id]="'airline' + i" formControlName="airline" class="form-control" placeholder="e.g., Indigo">
                </div>
                <div class="compact-flight-group">
                  <label [attr.for]="'flightDate' + i">Date</label>
                  <input type="date" [id]="'flightDate' + i" formControlName="flightDate" class="form-control">
                </div>
                <div class="compact-flight-group">
                  <label [attr.for]="'departureCity' + i">Departure City</label>
                  <input type="text" [id]="'departureCity' + i" formControlName="departureCity" class="form-control" placeholder="e.g., Bhopal">
                  <label [attr.for]="'departureTime' + i">Departure Time</label>
                  <div class="time-select-container">
                    <select [id]="'departureHour' + i" formControlName="departureHour" class="time-select">
                      <option value="00">12</option>
                      <option value="01">01</option>
                      <option value="02">02</option>
                      <option value="03">03</option>
                      <option value="04">04</option>
                      <option value="05">05</option>
                      <option value="06">06</option>
                      <option value="07">07</option>
                      <option value="08" selected>08</option>
                      <option value="09">09</option>
                      <option value="10">10</option>
                      <option value="11">11</option>
                    </select>
                    <select [id]="'departureMinute' + i" formControlName="departureMinute" class="time-select">
                      <option value="00">00</option>
                      <option value="05">05</option>
                      <option value="10">10</option>
                      <option value="15">15</option>
                      <option value="20">20</option>
                      <option value="25">25</option>
                      <option value="30">30</option>
                      <option value="35">35</option>
                      <option value="40">40</option>
                      <option value="45">45</option>
                      <option value="50">50</option>
                      <option value="55">55</option>
                    </select>
                    <select [id]="'departurePeriod' + i" formControlName="departurePeriod" class="time-select">
                      <option value="AM">AM</option>
                      <option value="PM">PM</option>
                    </select>
                  </div>
                </div>
                <div class="compact-flight-group">
                  <label [attr.for]="'arrivalCity' + i">Arrival City</label>
                  <input type="text" [id]="'arrivalCity' + i" formControlName="arrivalCity" class="form-control" placeholder="e.g., Bangalore">
                  <label [attr.for]="'arrivalTime' + i">Arrival Time</label>
                  <div class="time-select-container">
                    <select [id]="'arrivalHour' + i" formControlName="arrivalHour" class="time-select">
                      <option value="00">12</option>
                      <option value="01">01</option>
                      <option value="02">02</option>
                      <option value="03">03</option>
                      <option value="04">04</option>
                      <option value="05">05</option>
                      <option value="06">06</option>
                      <option value="07">07</option>
                      <option value="08">08</option>
                      <option value="09">09</option>
                      <option value="10" selected>10</option>
                      <option value="11">11</option>
                    </select>
                    <select [id]="'arrivalMinute' + i" formControlName="arrivalMinute" class="time-select">
                      <option value="00">00</option>
                      <option value="05">05</option>
                      <option value="10">10</option>
                      <option value="15">15</option>
                      <option value="20">20</option>
                      <option value="25">25</option>
                      <option value="30">30</option>
                      <option value="35">35</option>
                      <option value="40">40</option>
                      <option value="45">45</option>
                      <option value="50">50</option>
                      <option value="55">55</option>
                    </select>
                    <select [id]="'arrivalPeriod' + i" formControlName="arrivalPeriod" class="time-select">
                      <option value="AM">AM</option>
                      <option value="PM">PM</option>
                    </select>
                  </div>
                </div>
                <div class="compact-flight-group" style="align-self: flex-end;">
                  <button type="button" class="btn btn-danger" (click)="removeFlight(i)">
                    <i class="fas fa-trash"></i> Remove
                  </button>
                </div>
              </div>
            </div>
            <button type="button" id="addFlightBtn" class="btn btn-outline" (click)="addFlight()">
              <i class="fas fa-plus"></i> Add Another Flight
            </button>
          </div>
  
          <!-- Hotel Details Section -->
          <div class="form-section">
            <h2>Hotel Details</h2>
            <div formArrayName="hotelDetails" id="hotelDetailsContainer">
              <div class="compact-hotel-row" *ngFor="let hotel of hotels.controls; let i = index" [formGroupName]="i">
                <div class="compact-hotel-group">
                  <label [attr.for]="'city' + i">City</label>
                  <input type="text" [id]="'city' + i" formControlName="city" class="form-control" placeholder="e.g., Coorg">
                </div>
                <div class="compact-hotel-group">
                  <label [attr.for]="'hotel' + i">Hotel</label>
                  <input type="text" [id]="'hotel' + i" formControlName="hotel" class="form-control" placeholder="e.g., Hill Crest Resort">
                </div>
                <div class="compact-hotel-group">
                  <label [attr.for]="'roomCategory' + i">Room Category</label>
                  <input type="text" [id]="'roomCategory' + i" formControlName="roomCategory" class="form-control" placeholder="e.g., Superior cottage with Balcony">
                </div>
                <div class="compact-hotel-group">
                  <label [attr.for]="'numRooms' + i">No. of Rooms</label>
                  <input type="number" [id]="'numRooms' + i" formControlName="numRooms" class="form-control" placeholder="e.g., 1" min="1">
                </div>
                <div class="compact-hotel-group">
                  <label [attr.for]="'numNights' + i">No. of Nights</label>
                  <input type="number" [id]="'numNights' + i" formControlName="numNights" class="form-control" placeholder="e.g., 2" min="1">
                </div>
                <div class="compact-hotel-group" style="align-self: flex-end;">
                  <button type="button" class="btn btn-danger" (click)="removeHotel(i)">
                    <i class="fas fa-trash"></i> Remove
                  </button>
                </div>
              </div>
            </div>
            <button type="button" id="addHotelBtn" class="btn btn-outline" (click)="addHotel()">
              <i class="fas fa-plus"></i> Add Another Hotel
            </button>
          </div>
  
          <!-- Itinerary Section -->
          <div class="form-section">
            <h2>Daily Itinerary</h2>
            <table class="itinerary-table" id="itineraryTable">
              <thead>
                <tr>
                  <th>Day</th>
                  <th>Plan</th>
                  <th>Action</th>
                </tr>
              </thead>
              <tbody formArrayName="itineraryDays">
                <tr *ngFor="let day of days.controls; let i = index" [formGroupName]="i">
                  <td><input type="text" class="form-control" formControlName="day"></td>
                  <td><textarea class="form-control" formControlName="plan"></textarea></td>
                  <td><button type="button" class="btn btn-danger" (click)="removeDay(i)"><i class="fas fa-trash"></i></button></td>
                </tr>
              </tbody>
            </table>
            <button type="button" id="addDayBtn" class="btn btn-outline" (click)="addDay()">
              <i class="fas fa-plus"></i> Add Another Day
            </button>
          </div>
  
          <!-- Additional Notes -->
          <div class="form-section">
            <h2>Additional Information</h2>
            <div class="form-group">
              <label for="vehicleInfo">Vehicle Information</label>
              <input type="text" id="vehicleInfo" formControlName="vehicleInfo" class="form-control" placeholder="e.g., AC MUV">
            </div>
            <div class="form-group">
              <label for="paymentInfo">Payment Information</label>
              <textarea id="paymentInfo" formControlName="paymentInfo" class="form-control"></textarea>
            </div>
            <div class="form-group">
              <label for="contactInfo">Contact Information</label>
              <textarea id="contactInfo" formControlName="contactInfo" class="form-control"></textarea>
            </div>
          </div>
  
          <!-- Form Actions -->
          <div class="form-row" style="justify-content: center; margin-top: 30px;">
            <div class="btn-group">
              <button type="button" id="previewBtn" class="btn btn-outline" (click)="togglePreview()">
                <i class="fas fa-eye"></i> Preview
              </button>
              <button type="button" id="generatePdfBtn" class="btn" (click)="generatePDF()">
                <i class="fas fa-file-pdf"></i> Download PDF
              </button>
              <button type="reset" class="btn btn-danger">
                <i class="fas fa-trash"></i> Clear Form
              </button>
            </div>
          </div>
        </form>
      </div>
  
      <!-- Preview Section -->
      <div class="preview-section" id="previewSection" *ngIf="showPreview">
        <h2>Itinerary Preview</h2>
        <div class="preview-content" [innerHTML]="previewContent"></div>
        <div class="btn-group" style="justify-content: center; margin-top: 20px;">
          <button type="button" id="closePreviewBtn" class="btn btn-outline" (click)="closePreview()">
            <i class="fas fa-times"></i> Close Preview
          </button>
          <button type="button" id="downloadFromPreviewBtn" class="btn" (click)="generatePDF()">
            <i class="fas fa-file-pdf"></i> Download PDF
          </button>
        </div>
      </div>
    </div>
  </div>